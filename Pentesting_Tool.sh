#!/bin/bash

# Define the target system
read -p "Enter the target IP or URL: " target
report="pentest_report_$(date +%F).txt"

# Banner
echo "---------------------------------------------" | tee -a $report
echo "Automated Pentesting Tool - Report" | tee -a $report
echo "Target: $target" | tee -a $report
echo "Date: $(date)" | tee -a $report
echo "---------------------------------------------" | tee -a $report
echo "" | tee -a $report

# 1. Nikto Scan
echo "Running Nikto scan..." | tee -a $report
nikto -h $target -o nikto_scan.txt
echo "Nikto scan completed. Results saved to nikto_scan.txt" | tee -a $report
echo "" | tee -a $report
cat nikto_scan.txt >> $report
echo "" | tee -a $report

# 2. Metasploit (auxiliary/scanner/portscan/tcp)
echo "Running Metasploit TCP Port Scan..." | tee -a $report
msfconsole -q -x "use auxiliary/scanner/portscan/tcp; set RHOSTS $target; run; exit" > metasploit_scan.txt
echo "Metasploit TCP Port Scan completed. Results saved to metasploit_scan.txt" | tee -a $report
echo "" | tee -a $report
cat metasploit_scan.txt >> $report
echo "" | tee -a $report

# 3. SQLmap Scan
echo "Running SQLmap scan..." | tee -a $report
sqlmap -u "$target" --batch --level=2 --risk=2 --output-dir=./sqlmap_output > sqlmap_scan.txt
echo "SQLmap scan completed. Results saved to sqlmap_scan.txt" | tee -a $report
echo "" | tee -a $report
cat sqlmap_scan.txt >> $report
echo "" | tee -a $report

# 4. Nmap Scan
echo "Running Nmap scan..." | tee -a $report
nmap -A -T4 $target > nmap_scan.txt
echo "Nmap scan completed. Results saved to nmap_scan.txt" | tee -a $report
echo "" | tee -a $report
cat nmap_scan.txt >> $report
echo "" | tee -a $report

# 5. Summary
echo "---------------------------------------------" | tee -a $report
echo "Pentesting Summary" | tee -a $report
echo "---------------------------------------------" | tee -a $report
echo "Nikto scan, Metasploit scan, SQLmap scan, and Nmap scan have been run against the target." | tee -a $report
echo "Please review the full report for detailed findings." | tee -a $report

# End of Script
echo "Automated pentesting completed. Full report saved to $report"
